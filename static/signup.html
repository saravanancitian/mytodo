<!DOCTYPE html>

<html>
    <head>

        <script src="js/ajax.js"> </script>
        <script src="js/utils.js"></script>

    </head>
    <body>
        <h1>MyTodo</h1>
        <h3>Sign Up</h3>
        <form id="frmsignup">
            <label>Name:</label><input type="text" id="name" value=""/>
            <br>
            <label>Email:</label><input type="text" id="email" value=""/>
            <br>
            <label>Password:</label><input type="text" id="password" value=""/>
            <br>
            <label>Confirm Password:</label><input type="text" id="confirmPass" value=""/>
            <br>
            <input type="submit" id="submit" value="Submit">
            <input type="button" id="cancel" value="cancel" onclick="javascript:history.back();">



        </form>

        <script>
            
            function handleSubmit(event){
                event.preventDefault();
                const data = formtojson(event.target);
                if(data.password.localeCompare(data.confirmPass) == 0){
                    ajxcall("/signup", "POST", JSON.stringify(data), (ret)=>{alert("success" + ret)}, false);    
                }
                else {
                       alert("Confirm Password not match"); 
                }
                
            }

            const form = document.getElementById('frmsignup');
            form.addEventListener('submit', handleSubmit);

        </script>
    </body>
</html>